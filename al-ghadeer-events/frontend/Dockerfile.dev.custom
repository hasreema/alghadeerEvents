# Alternative Development Dockerfile using Ubuntu (more reliable for SSL issues)

FROM ubuntu:22.04

# Prevent interactive prompts
ENV DEBIAN_FRONTEND=noninteractive

# Install Node.js and dependencies
RUN apt-get update && \
    apt-get install -y \
    curl \
    wget \
    git \
    build-essential \
    python3 \
    ca-certificates \
    gnupg \
    lsb-release && \
    # Add NodeSource repository
    curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs && \
    # Clean up
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Update certificates
RUN update-ca-certificates

WORKDIR /app

# Copy package files
COPY package*.json ./

# Configure npm for SSL issues
RUN npm config set strict-ssl false && \
    npm config set registry http://registry.npmjs.org/ && \
    npm set progress=false && \
    npm set loglevel=error

# Install dependencies
RUN npm install || npm install --force || echo "npm install failed, continuing..."

# Expose port
EXPOSE 3000

# Run development server
CMD ["npm", "run", "dev"]